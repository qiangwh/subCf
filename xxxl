<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我们的一周年</title>
    <style>
        @font-face {
            font-family: 'Digital-7';
            src: url('digital-7_mono.ttf') format('truetype');
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
            overflow-x: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            position: relative;
        }
        
        /* 背景装饰 */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite alternate;
        }
        
        @keyframes twinkle {
            from { opacity: 0.3; }
            to { opacity: 1; }
        }
        
        /* 容器样式 */
        .container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            text-align: center;
        }
        
        h1 {
            font-size: 3rem;
            margin: 2rem 0;
            background: linear-gradient(90deg, #ff9a9e, #fad0c4);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(255,255,255,0.2);
        }
        
        .anniversary-date {
            font-family: 'Digital-7', monospace;
            font-size: 2rem;
            margin: 1rem 0 3rem;
            color: #f8b195;
            text-shadow: 0 0 10px rgba(248, 177, 149, 0.5);
            letter-spacing: 2px; /* 增加字间距，更美观 */
        }
        
        /* 照片墙 */
        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 3rem 0;
        }
        
        .photo-item {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            height: 200px;
        }
        
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.5s ease;
        }
        
        .photo-item:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.5);
        }
        
        .photo-item:hover img {
            filter: brightness(1.1);
        }
        
        .photo-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            padding: 0.8rem;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .photo-item:hover .photo-caption {
            transform: translateY(0);
        }
        
        /* 时间线 */
        .timeline {
            position: relative;
            max-width: 800px;
            margin: 5rem auto;
        }
        
        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background-color: #f8b195;
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
            border-radius: 3px;
        }
        
        .timeline-item {
            padding: 10px 40px;
            position: relative;
            width: 50%;
            box-sizing: border-box;
        }
        
        .timeline-item::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: white;
            border: 4px solid #ff9a9e;
            border-radius: 50%;
            top: 15px;
            z-index: 1;
        }
        
        .left {
            left: 0;
        }
        
        .right {
            left: 50%;
        }
        
        .left::after {
            right: -13px;
        }
        
        .right::after {
            left: -13px;
        }
        
        .timeline-content {
            padding: 20px;
            background-color: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .timeline-content:hover {
            transform: scale(1.03);
            background-color: rgba(255,255,255,0.15);
        }
        
        .message {
            max-width: 800px;
            margin: 3rem auto;
            padding: 2rem;
            background-color: rgba(255,255,255,0.05);
            border-radius: 15px;
            line-height: 1.8;
            font-size: 1.2rem;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        /* 爱心动画容器 */
        #garden {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }
        
        /* 响应式设计 */
        @media screen and (max-width: 768px) {
            .timeline::after {
                left: 31px;
            }
            
            .timeline-item {
                width: 100%;
                padding-left: 70px;
                padding-right: 25px;
            }
            
            .right {
                left: 0%;
            }
            
            .left::after, .right::after {
                left: 18px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .anniversary-date {
                font-size: 1.5rem;
            }
        }
        
        /* 滚动动画 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards;
        }
        
        .delay-1 { animation-delay: 0.2s; }
        .delay-2 { animation-delay: 0.4s; }
        .delay-3 { animation-delay: 0.6s; }
    </style>
</head>
<body>
    <div class="stars"></div>
    <div id="garden"></div>
    
    <div class="container">
        <h1 class="fade-in">我们的一周年</h1>
        <div class="anniversary-date fade-in delay-1" id="countdown"></div>
        
        <div class="message fade-in delay-2">
            亲爱的，不知不觉我们已经一起走过了一整年。这365天里，有欢笑有感动，有争吵也有和解。感谢你出现在我的生命里，让每一个平凡的日子都变得特别。未来还有很多个周年要一起庆祝，我爱你。
        </div>
        
        <div class="timeline fade-in delay-3">
            <div class="timeline-item left">
                <div class="timeline-content">
                    <h3>第一次相遇</h3>
                    <p>还记得那天在咖啡馆，你不小心打翻了咖啡，却成就了我们的第一次对话...</p>
                </div>
            </div>
            
            <div class="timeline-item right">
                <div class="timeline-content">
                    <h3>第一次约会</h3>
                    <p>我们去看了那场有趣的喜剧电影，你笑得像个孩子，那一刻我就知道，我喜欢上你了...</p>
                </div>
            </div>
            
            <div class="timeline-item left">
                <div class="timeline-content">
                    <h3>确认关系</h3>
                    <p>在那个星光璀璨的夜晚，我鼓足勇气向你表白，你的点头是我听过最动听的答案...</p>
                </div>
            </div>
            
            <div class="timeline-item right">
                <div class="timeline-content">
                    <h3>第一次旅行</h3>
                    <p>海边的日出真美，但比不过你熟睡时的侧脸，那是我心中最美的风景...</p>
                </div>
            </div>
        </div>
        
        <h2 class="fade-in">我们的回忆</h2>
        <div class="photo-gallery">
            <div class="photo-item">
                <img src="https://source.unsplash.com/random/300x200/?couple" alt="我们的照片">
                <div class="photo-caption">第一次一起看电影</div>
            </div>
            <div class="photo-item">
                <img src="https://source.unsplash.com/random/300x200/?date" alt="我们的照片">
                <div class="photo-caption">周年纪念日晚餐</div>
            </div>
            <div class="photo-item">
                <img src="https://source.unsplash.com/random/300x200/?travel" alt="我们的照片">
                <div class="photo-caption">一起去旅行</div>
            </div>
            <div class="photo-item">
                <img src="https://source.unsplash.com/random/300x200/?sunset" alt="我们的照片">
                <div class="photo-caption">一起看日落</div>
            </div>
        </div>
    </div>

    <script>
        // 创建星星背景
        function createStars() {
            const starsContainer = document.querySelector('.stars');
            const starCount = 150;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                // 随机大小和位置
                const size = Math.random() * 3 + 1;
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                const delay = Math.random() * 5;
                
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                star.style.animationDelay = `${delay}s`;
                
                starsContainer.appendChild(star);
            }
        }
        
        // 【核心优化】动态实时更新时间（精确到秒，1秒刷新1次）
        function updateCountdown() {
            // 设置你们的纪念日，格式：年, 月-1, 日（示例：2023,5,15 对应2023年6月15日）
            // 你可以修改这里的日期为你们的实际纪念日
            const anniversary = new Date(2023, 5, 15); 
            const today = new Date();
            
            // 计算时间差（毫秒数）
            const timeDiff = today - anniversary;
            
            // 转换为 天/小时/分钟/秒
            const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
            
            // 动态更新页面显示（可选择显示 天+时+分+秒，或保留原有的天+时）
            // 选项1：显示 天 时 分 秒（更细致，动态感更强）
            document.getElementById('countdown').textContent = 
                `我们已经一起度过了 ${days} 天 ${hours} 小时 ${minutes} 分钟 ${seconds} 秒`;
            
            // 选项2：只显示 天 时（和原有格式一致，动态刷新）
            // document.getElementById('countdown').textContent = 
            //     `我们已经一起度过了 ${days} 天 ${hours} 小时`;
        }
        
        // 滚动动画
        function handleScrollAnimations() {
            const elements = document.querySelectorAll('.fade-in');
            
            elements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;
                
                if (elementTop < window.innerHeight - elementVisible) {
                    element.style.opacity = 1;
                }
            });
        }
        
        // 初始化花园配置（扩展原有功能）
        const Garden = {
            options: {
                bloomRadius: {
                    max: 15,
                    min: 5
                }
            }
        };
        
        // 页面加载完成后初始化
        window.addEventListener('load', () => {
            createStars();
            updateCountdown(); // 页面加载时立即执行一次
            setInterval(updateCountdown, 1000); // 【关键】1000毫秒=1秒，每秒刷新一次，实现动态效果
            
            // 启动爱心动画
            startHeartAnimation();
            
            // 初始检查动画元素
            handleScrollAnimations();
        });
        
        // 滚动时检查动画元素
        window.addEventListener('scroll', handleScrollAnimations);

        // 爱心动画相关代码
        function startHeartAnimation() {
            var interval = 50;
            var angle = 10;
            var heart = new Array();
            var animationTimer = setInterval(function () {
                var bloom = getHeartPoint(angle);
                var draw = true;
                for (var i = 0; i < heart.length; i++) {
                    var p = heart[i];
                    var distance = Math.sqrt(Math.pow(p[0] - bloom[0], 2) + Math.pow(p[1] - bloom[1], 2));
                    if (distance < Garden.options.bloomRadius.max * 1.3) {
                        draw = false;
                        break;
                    }
                }
                if (draw) {
                    heart.push(bloom);
                    garden.createRandomBloom(bloom[0], bloom[1]);
                }
                if (angle >= 30) {
                    clearInterval(animationTimer);
                    showMessages();
                } else {
                    angle += 0.2;
                }
            }, interval);
        }
        
        // 心形曲线计算函数
        function getHeartPoint(angle) {
            var t = angle / Math.PI;
            var x = 19.5 * (16 * Math.pow(Math.sin(t), 3));
            var y = -20 * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
            
            // 调整位置使其居中
            return [
                x + window.innerWidth / 2,
                y + window.innerHeight / 2 - 100
            ];
        }
        
        // 显示消息函数
        function showMessages() {
            setTimeout(() => {
                startHeartAnimation(); // 循环播放爱心动画
            }, 5000);
        }
        
        // 花园绘制相关代码
        const garden = {
            ctx: null,
            blooms: [],
            
            init() {
                const canvas = document.getElementById('garden');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                this.ctx = canvas.getContext('2d');
            },
            
            createRandomBloom(x, y) {
                this.blooms.push(new Bloom(this, {x, y}));
                this.render();
            },
            
            removeBloom(bloom) {
                this.blooms = this.blooms.filter(b => b !== bloom);
            },
            
            render() {
                this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);
                this.blooms.forEach(bloom => bloom.draw());
                requestAnimationFrame(() => this.render());
            }
        };
        
        // 花瓣类
        class Bloom {
            constructor(garden, position) {
                this.garden = garden;
                this.p = position;
                this.petals = [];
                this.initPetals();
            }
            
            initPetals() {
                for (let i = 0; i < 5; i++) {
                    this.petals.push(new Petal(this.garden.ctx, this.p));
                }
            }
            
            draw() {
                var p, isfinished = true;
                this.garden.ctx.save();
                this.garden.ctx.translate(this.p.x, this.p.y);
                for (var i = 0; i < this.petals.length; i++) {
                    p = this.petals[i];
                    p.render();
                    isfinished *= p.isfinished;
                }
                this.garden.ctx.restore();
                if (isfinished == true) {
                    this.garden.removeBloom(this);
                }
            }
        }
        
        // 花瓣类
        class Petal {
            constructor(ctx, position) {
                this.ctx = ctx;
                this.position = position;
                this.isfinished = false;
                this.size = Math.random() * 5 + 3;
                this.color = this.getRandomColor();
                this.alpha = 1;
                this.life = Math.random() * 30 + 20;
                this.age = 0;
            }
            
            getRandomColor() {
                const colors = [
                    '#ff9a9e', '#fad0c4', '#fcb69f', 
                    '#ffecd2', '#b5ead7', '#c7ceea'
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            render() {
                if (this.age >= this.life) {
                    this.isfinished = true;
                    return;
                }
                
                this.age++;
                this.alpha = 1 - (this.age / this.life);
                
                this.ctx.beginPath();
                this.ctx.arc(
                    Math.random() * 10 - 5, 
                    Math.random() * 10 - 5, 
                    this.size, 
                    0, 
                    Math.PI * 2
                );
                this.ctx.fillStyle = `${this.color}${Math.floor(this.alpha * 255).toString(16).padStart(2, '0')}`;
                this.ctx.fill();
            }
        }
        
        // 初始化花园
        garden.init();
    </script>
</body>
</html>
